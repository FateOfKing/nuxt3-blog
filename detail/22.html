<!DOCTYPE html>
<html  data-head-attrs="">

<head >
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="head:count" content="2"><link rel="modulepreload" href="/_nuxt/entry-f741e337.mjs" as="script" crossorigin><link rel="preload" href="/_nuxt/entry.20072ffb.css" as="style"><link rel="modulepreload" href="/_nuxt/_id_-29b5aadc.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/article-44463891.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/index-ed8b9815.mjs" as="script" crossorigin><link rel="prefetch" href="/_nuxt/avatar.a4306ac7.jpg"><link rel="prefetch" as="script" href="/_nuxt/archive-b3e2e3c1.mjs"><link rel="prefetch" as="script" href="/_nuxt/pageContainer-175193d4.mjs"><link rel="prefetch" as="script" href="/_nuxt/index-90de7d74.mjs"><link rel="prefetch" as="script" href="/_nuxt/life-2a467d13.mjs"><link rel="prefetch" as="script" href="/_nuxt/skillSample-d700c28d.mjs"><link rel="stylesheet" href="/_nuxt/entry.20072ffb.css">
</head>

<body  data-head-attrs="">
  <div id="__nuxt"><!--[--><!--[--><div class="bg-gray-page-bg-color h-screen" data-v-f59aa03c><div class="flex justify-center bg-black-bg-color" data-v-f59aa03c data-v-3cc81b26><div class="flex container h-[3.5rem] leading-[3.5rem] text-white px-5" data-v-3cc81b26><a href="/" class="site-title" data-v-3cc81b26>CarleBlog.com</a><span class="head-title-container" data-v-3cc81b26><a href="/" class="head-title" data-v-3cc81b26>博客首页</a></span><span class="head-title-container" data-v-3cc81b26><a href="/archive" class="head-title" data-v-3cc81b26>归档文章</a></span><span class="head-title-container" data-v-3cc81b26><a href="/skillSample" class="head-title" data-v-3cc81b26>技能展示</a></span></div></div><div class="container h-full mx-auto main clear-fix px-10" data-v-f59aa03c><div class="center bg-white mt-5 p-5" data-v-f59aa03c><div data-v-f59aa03c><div class="text-black text-xl font-bold text-center" data-v-f59aa03c>iPhone-X使用IQKeyboardManager管理UITextfield键盘</div><div class="text-sm text-gray-400 text-center mt-3" data-v-f59aa03c>2020-7-16</div><div data-v-f59aa03c><p>在全面屏上用IQKeyboardManager管理键盘高度时发现，底部的UITextfield键盘弹出时老是会和键盘空出一段。
适配全面屏iPhone X没有适配好？这框架这么垃圾？</p>
<p><img src="https://upload-images.jianshu.io/upload_images/12634286-4c209e87897583bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/12634286-e937be4b26589ec4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>百度无果，直接扒源码。对了我用的是swift版本，oc应该差不多吧。
找到了这个地方
<img src="https://upload-images.jianshu.io/upload_images/12634286-722ac4fe80e634a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png">
红框框出来的地方就是核心。</p>
<p>如果<code>textFieldView</code>是<code>UIScrollView</code>并且在编辑状态高度为0，否则就为layoutMargins.bottom。</p>
<h3 id="解决办法1">解决办法1</h3>
<p>难道把我自己写的<code>UITextfield </code>改成<code>UITextView</code>就好了？
我试了一下果然就可以了。图我就不贴了，因为此方法我不推荐。</p>
<h3 id="解决办法2">解决办法2</h3>
<p>那我去改变默认的layoutMargins.bottom行不行！
于是在<code>viewdidload</code>中加入一句话</p>
<pre><code> <span class="hljs-keyword">if</span> <span class="hljs-keyword">#available</span>(<span class="hljs-keyword">iOS</span> <span class="hljs-number">11.0</span>, <span class="hljs-operator">*</span>) {
            view.insetsLayoutMarginsFromSafeArea <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Fallback on earlier versions</span>
        }
</code></pre>
<p><img src="https://upload-images.jianshu.io/upload_images/12634286-104eba783cedc3d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>完美搞定！</p>
</div></div></div></div></div><!--]--><!--]--></div><script>window.__NUXT__={data:{pinia:{},urql:{"2323059951":{data:"{\"getArticle\":{\"id\":22,\"title\":\"iPhone-X使用IQKeyboardManager管理UITextfield键盘\",\"article_content\":\"在全面屏上用IQKeyboardManager管理键盘高度时发现，底部的UITextfield键盘弹出时老是会和键盘空出一段。\\n适配全面屏iPhone X没有适配好？这框架这么垃圾？\\n\\n![image.png](https:\u002F\u002Fupload-images.jianshu.io\u002Fupload_images\u002F12634286-4c209e87897583bf.png?imageMogr2\u002Fauto-orient\u002Fstrip%7CimageView2\u002F2\u002Fw\u002F1240)\\n\\n![image.png](https:\u002F\u002Fupload-images.jianshu.io\u002Fupload_images\u002F12634286-e937be4b26589ec4.png?imageMogr2\u002Fauto-orient\u002Fstrip%7CimageView2\u002F2\u002Fw\u002F1240)\\n\\n\\n百度无果，直接扒源码。对了我用的是swift版本，oc应该差不多吧。\\n找到了这个地方\\n![image.png](https:\u002F\u002Fupload-images.jianshu.io\u002Fupload_images\u002F12634286-722ac4fe80e634a5.png?imageMogr2\u002Fauto-orient\u002Fstrip%7CimageView2\u002F2\u002Fw\u002F1240)\\n红框框出来的地方就是核心。\\n\\n如果`textFieldView`是`UIScrollView`并且在编辑状态高度为0，否则就为layoutMargins.bottom。\\n\\n### 解决办法1\\n难道把我自己写的`UITextfield `改成`UITextView`就好了？\\n我试了一下果然就可以了。图我就不贴了，因为此方法我不推荐。\\n\\n### 解决办法2\\n那我去改变默认的layoutMargins.bottom行不行！\\n于是在`viewdidload`中加入一句话\\n```\\n if #available(iOS 11.0, *) {\\n            view.insetsLayoutMarginsFromSafeArea = false\\n        } else {\\n            \u002F\u002F Fallback on earlier versions\\n        }\\n```\\n![image.png](https:\u002F\u002Fupload-images.jianshu.io\u002Fupload_images\u002F12634286-104eba783cedc3d1.png?imageMogr2\u002Fauto-orient\u002Fstrip%7CimageView2\u002F2\u002Fw\u002F1240)\\n\\n完美搞定！\\n\",\"addTime\":1594877324,\"view_content\":0,\"type_id\":\"4\",\"__typename\":\"ArticleDto\"}}"}}},state:{error:null},_errors:{},serverRendered:true,config:{public:{},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:""}},__URQL_DATA__:{}}</script><script type="module" src="/_nuxt/entry-f741e337.mjs" crossorigin></script><script type="module" src="/_nuxt/_id_-29b5aadc.mjs" crossorigin></script>
</body>

</html>