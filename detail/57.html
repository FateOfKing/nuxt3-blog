<!DOCTYPE html>
<html  data-head-attrs="">

<head >
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="head:count" content="2"><link rel="modulepreload" href="/_nuxt/entry-34246c69.mjs" as="script" crossorigin><link rel="preload" href="/_nuxt/entry.20072ffb.css" as="style"><link rel="modulepreload" href="/_nuxt/_id_-b9273ba3.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/article-5b7facef.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/index-ed8b9815.mjs" as="script" crossorigin><link rel="prefetch" href="/_nuxt/avatar.a4306ac7.jpg"><link rel="prefetch" as="script" href="/_nuxt/archive-393b2b93.mjs"><link rel="prefetch" as="script" href="/_nuxt/pageContainer-321f4945.mjs"><link rel="prefetch" as="script" href="/_nuxt/index-568af741.mjs"><link rel="prefetch" as="script" href="/_nuxt/life-2a467d13.mjs"><link rel="prefetch" as="script" href="/_nuxt/skillSample-02a0f0ec.mjs"><link rel="stylesheet" href="/_nuxt/entry.20072ffb.css">
</head>

<body  data-head-attrs="">
  <div id="__nuxt"><!--[--><!--[--><div class="bg-gray-page-bg-color h-screen" data-v-f59aa03c><div class="flex justify-center bg-black-bg-color" data-v-f59aa03c data-v-3cc81b26><div class="flex container h-[3.5rem] leading-[3.5rem] text-white px-5" data-v-3cc81b26><a href="/" class="site-title" data-v-3cc81b26>CarleBlog.com</a><span class="head-title-container" data-v-3cc81b26><a href="/" class="head-title" data-v-3cc81b26>博客首页</a></span><span class="head-title-container" data-v-3cc81b26><a href="/archive" class="head-title" data-v-3cc81b26>归档文章</a></span><span class="head-title-container" data-v-3cc81b26><a href="/skillSample" class="head-title" data-v-3cc81b26>技能展示</a></span></div></div><div class="container h-full mx-auto main clear-fix px-10" data-v-f59aa03c><div class="center bg-white mt-5 p-5" data-v-f59aa03c><div data-v-f59aa03c><div class="text-black text-xl font-bold text-center" data-v-f59aa03c>Mac搭建YApi平台</div><div class="text-sm text-gray-400 text-center mt-3" data-v-f59aa03c>2020-7-17</div><div data-v-f59aa03c><p>YApi 旨在为开发、产品、测试人员提供更优雅的接口管理服务。可以帮助开发者轻松创建、发布、维护 API</p>
<p><a href="https://yapi.ymfe.org/devops/index.html">官网教程链接</a></p>
<p>首先需要满足以下条件
nodejs（7.6+)
mongodb（2.6+）
git</p>
<h3 id="nodejs安装">nodejs安装</h3>
<p>nodejs安装直接命令行</p>
<pre><code>brew install <span class="hljs-keyword">node</span><span class="hljs-title"></span>
</code></pre>
<h3 id="mongodb安装">mongodb安装</h3>
<p>命令行安装</p>
<pre><code>brew tap mongodb/brew
brew install mongodb-community
brew services start mongodb-community
</code></pre>
<h3 id="yapi安装">YApi安装</h3>
<pre><code>npm install -g yapi-<span class="hljs-keyword">cli</span> --registry https://registry.npm.taobao<span class="hljs-meta">.org</span>
sudo yapi server
</code></pre>
<p>一定要用<code>sudo yapi server</code></p>
<h4 id="错误1">错误1</h4>
<blockquote>
<p>开始下载平台文件压缩包...卡住了
把url的文件下载下来
把里面的文件放进以下目录
/Users/用户名/my-yapi/vendors</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/12634286-56bac44a3f94a40d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>然后</p>
<pre><code><span class="hljs-keyword">which</span> yapi-<span class="hljs-keyword">cli</span>
</code></pre>
<p>输出<code> /Users/用户名/.nvm/versions/node/v12.11.1/bin/yapi-cli</code></p>
<p>最终找到目录下的<code>install.js</code>
完整地址：<code>/Users/king/.nvm/versions/node/v12.11.1/lib/node_modules/yapi-cli/src/commands/install.js </code></p>
<p>把这两行注释掉</p>
<pre><code><span class="hljs-regexp">//</span> utils.log(<span class="hljs-string">&#x27;开始下载平台文件压缩包...&#x27;</span>)
<span class="hljs-regexp">//</span> await wget(yapiPath, v);
</code></pre>
<p>保存后重新运行
<code>sudo yapi server</code></p>
<h4 id="错误2">错误2</h4>
<blockquote>
<p>Error: Cannot find module &#39;nodemailer&#39;
使用以下命令</p>
</blockquote>
<pre><code>cd <span class="hljs-regexp">/Users/</span>用户名<span class="hljs-regexp">/my-yapi/</span>vendors 
sudo npm install
</code></pre>
<p>再使用<code>sudo yapi server</code></p>
<p>最终成功
<img src="https://upload-images.jianshu.io/upload_images/12634286-5646d8c3f56f2dc4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
</div></div></div></div></div><!--]--><!--]--></div><script>window.__NUXT__={data:{pinia:{},urql:{"2323063383":{data:"{\"getArticle\":{\"id\":57,\"title\":\"Mac搭建YApi平台\",\"article_content\":\"YApi 旨在为开发、产品、测试人员提供更优雅的接口管理服务。可以帮助开发者轻松创建、发布、维护 API\\n\\n[官网教程链接](https:\u002F\u002Fyapi.ymfe.org\u002Fdevops\u002Findex.html)\\n\\n首先需要满足以下条件\\nnodejs（7.6+)\\nmongodb（2.6+）\\ngit\\n\\n### nodejs安装\\nnodejs安装直接命令行\\n```\\nbrew install node\\n```\\n\\n### mongodb安装\\n命令行安装\\n```\\nbrew tap mongodb\u002Fbrew\\nbrew install mongodb-community\\nbrew services start mongodb-community\\n```\\n\\n### YApi安装\\n```\\nnpm install -g yapi-cli --registry https:\u002F\u002Fregistry.npm.taobao.org\\nsudo yapi server\\n```\\n一定要用`sudo yapi server`\\n\\n#### 错误1\\n\u003E 开始下载平台文件压缩包...卡住了\\n把url的文件下载下来\\n把里面的文件放进以下目录\\n\u002FUsers\u002F用户名\u002Fmy-yapi\u002Fvendors\\n\\n![image.png](https:\u002F\u002Fupload-images.jianshu.io\u002Fupload_images\u002F12634286-56bac44a3f94a40d.png?imageMogr2\u002Fauto-orient\u002Fstrip%7CimageView2\u002F2\u002Fw\u002F1240)\\n\\n\\n然后\\n```\\nwhich yapi-cli\\n```\\n输出` \u002FUsers\u002F用户名\u002F.nvm\u002Fversions\u002Fnode\u002Fv12.11.1\u002Fbin\u002Fyapi-cli`\\n\\n最终找到目录下的`install.js`\\n完整地址：`\u002FUsers\u002Fking\u002F.nvm\u002Fversions\u002Fnode\u002Fv12.11.1\u002Flib\u002Fnode_modules\u002Fyapi-cli\u002Fsrc\u002Fcommands\u002Finstall.js `\\n\\n把这两行注释掉\\n```\\n\u002F\u002F utils.log('开始下载平台文件压缩包...')\\n\u002F\u002F await wget(yapiPath, v);\\n```\\n\\n保存后重新运行\\n`sudo yapi server`\\n\\n#### 错误2\\n\u003E Error: Cannot find module 'nodemailer'\\n使用以下命令\\n```\\ncd \u002FUsers\u002F用户名\u002Fmy-yapi\u002Fvendors \\nsudo npm install\\n```\\n再使用`sudo yapi server`\\n\\n最终成功\\n![image.png](https:\u002F\u002Fupload-images.jianshu.io\u002Fupload_images\u002F12634286-5646d8c3f56f2dc4.png?imageMogr2\u002Fauto-orient\u002Fstrip%7CimageView2\u002F2\u002Fw\u002F1240)\\n\\n\\n\",\"addTime\":1594964726,\"view_content\":0,\"type_id\":\"4\",\"__typename\":\"ArticleDto\"}}"}}},state:{error:null},_errors:{},serverRendered:true,config:{public:{},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:""}},__URQL_DATA__:{}}</script><script type="module" src="/_nuxt/entry-34246c69.mjs" crossorigin></script><script type="module" src="/_nuxt/_id_-b9273ba3.mjs" crossorigin></script>
</body>

</html>