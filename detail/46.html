<!DOCTYPE html>
<html  data-head-attrs="">

<head >
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="head:count" content="2"><link rel="modulepreload" href="/_nuxt/entry-75bc457b.mjs" as="script" crossorigin><link rel="preload" href="/_nuxt/entry.20072ffb.css" as="style"><link rel="modulepreload" href="/_nuxt/_id_-1f857193.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/article-726819bb.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/index-ed8b9815.mjs" as="script" crossorigin><link rel="prefetch" href="/_nuxt/avatar.a4306ac7.jpg"><link rel="prefetch" as="script" href="/_nuxt/archive-274aff02.mjs"><link rel="prefetch" as="script" href="/_nuxt/pageContainer-142f2fef.mjs"><link rel="prefetch" as="script" href="/_nuxt/index-f522a8b8.mjs"><link rel="prefetch" as="script" href="/_nuxt/life-2a467d13.mjs"><link rel="prefetch" as="script" href="/_nuxt/skillSample-8fd6e8fe.mjs"><link rel="stylesheet" href="/_nuxt/entry.20072ffb.css">
</head>

<body  data-head-attrs="">
  <div id="__nuxt"><!--[--><!--[--><div class="bg-gray-page-bg-color h-screen" data-v-f59aa03c><div class="flex justify-center bg-black-bg-color" data-v-f59aa03c data-v-3cc81b26><div class="flex container h-[3.5rem] leading-[3.5rem] text-white px-5" data-v-3cc81b26><a href="/" class="site-title" data-v-3cc81b26>CarleBlog.com</a><span class="head-title-container" data-v-3cc81b26><a href="/" class="head-title" data-v-3cc81b26>博客首页</a></span><span class="head-title-container" data-v-3cc81b26><a href="/archive" class="head-title" data-v-3cc81b26>归档文章</a></span><span class="head-title-container" data-v-3cc81b26><a href="/skillSample" class="head-title" data-v-3cc81b26>技能展示</a></span></div></div><div class="container h-full mx-auto main clear-fix px-10" data-v-f59aa03c><div class="center bg-white mt-5 p-5" data-v-f59aa03c><div data-v-f59aa03c><div class="text-black text-xl font-bold text-center" data-v-f59aa03c>weex笔记（3）weex使用iconfont</div><div class="text-sm text-gray-400 text-center mt-3" data-v-f59aa03c>2020-7-17</div><div data-v-f59aa03c><p>iconfont 优势较小资源包替代app中icon等减小App包，一个font.ttf文件解决多端icon尺寸问题。
可以加载本地和网络ttf,具体写法</p>
<pre><code>    initIconfont() {
        <span class="hljs-keyword">let</span> dom = weex.requireModule(<span class="hljs-string">&#x27;dom&#x27;</span>);
        <span class="hljs-comment">//通过获取platform判断加载字体文件的路径,(待完善,在手机的playground中,是无法加载本地文件的)</span>
        <span class="hljs-keyword">let</span> platform = weex.config.env.platform.toLowerCase();
        <span class="hljs-keyword">let</span> <span class="hljs-built_in">url</span>;
        <span class="hljs-keyword">if</span> ( <span class="hljs-string">&quot;android&quot;</span> == platform) {
            <span class="hljs-comment">//本地资源采用&#x27;local:// &#x27;的方式加载</span>
           <span class="hljs-comment">//第三个斜杠是代表当前目录,对于android来说,如果加载的是字体,那么就是assets目录,同理`/iconfont.ttf&#x27;`就是加载`assets`目录下的iconfont.ttf文件</span>
            <span class="hljs-built_in">url</span> = <span class="hljs-string">&quot;url(&#x27;local:///font/iconfont.ttf&#x27;)&quot;</span>;<span class="hljs-comment">//注意我这里是将字体文件放在&#x27;assets/font/&#x27;&#x27;目录下的,所以</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;ios&quot;</span> == platform) {
            <span class="hljs-comment">//todo 理论上同android未测试</span>
            <span class="hljs-built_in">url</span> = <span class="hljs-string">&quot;url(&#x27;local:///font/iconfont.ttf&#x27;)&quot;</span>;
        } <span class="hljs-title">else</span> {
            <span class="hljs-built_in">url</span> = <span class="hljs-string">&quot;url(&#x27;http://at.alicdn.com/t/xxxxxxx.ttf&#x27;)&quot;</span>
        }
        dom.addRule(<span class="hljs-string">&#x27;fontFace&#x27;</span>, {
            <span class="hljs-string">&#x27;fontFamily&#x27;</span>: <span class="hljs-string">&quot;iconfont&quot;</span>,
            <span class="hljs-string">&#x27;src&#x27;</span>: <span class="hljs-built_in">url</span>
        });
    }
</code></pre>
<p>在合适的地方调用initIconfont方法即可
布局中如何书写</p>
<pre><code><span class="hljs-comment">//template</span>
    &lt;text <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot; iconfont&quot;</span>&gt;&lt;/text&gt;
<span class="hljs-comment">//css</span>
.iconfont {
        font-family:iconfont;
    }
</code></pre>
<p>&amp; # x e 6 6 0;即为图标Unicode</p>
</div></div></div></div></div><!--]--><!--]--></div><script>window.__NUXT__={data:{pinia:{},urql:{"2323062261":{data:"{\"getArticle\":{\"id\":46,\"title\":\"weex笔记（3）weex使用iconfont\",\"article_content\":\"iconfont 优势较小资源包替代app中icon等减小App包，一个font.ttf文件解决多端icon尺寸问题。\\n可以加载本地和网络ttf,具体写法\\n```\\n    initIconfont() {\\n        let dom = weex.requireModule('dom');\\n        \u002F\u002F通过获取platform判断加载字体文件的路径,(待完善,在手机的playground中,是无法加载本地文件的)\\n        let platform = weex.config.env.platform.toLowerCase();\\n        let url;\\n        if ( \\\"android\\\" == platform) {\\n            \u002F\u002F本地资源采用'local:\u002F\u002F '的方式加载\\n           \u002F\u002F第三个斜杠是代表当前目录,对于android来说,如果加载的是字体,那么就是assets目录,同理`\u002Ficonfont.ttf'`就是加载`assets`目录下的iconfont.ttf文件\\n            url = \\\"url('local:\u002F\u002F\u002Ffont\u002Ficonfont.ttf')\\\";\u002F\u002F注意我这里是将字体文件放在'assets\u002Ffont\u002F''目录下的,所以\\n        } else if (\\\"ios\\\" == platform) {\\n            \u002F\u002Ftodo 理论上同android未测试\\n            url = \\\"url('local:\u002F\u002F\u002Ffont\u002Ficonfont.ttf')\\\";\\n        } else {\\n            url = \\\"url('http:\u002F\u002Fat.alicdn.com\u002Ft\u002Fxxxxxxx.ttf')\\\"\\n        }\\n        dom.addRule('fontFace', {\\n            'fontFamily': \\\"iconfont\\\",\\n            'src': url\\n        });\\n    }\\n\\n```\\n在合适的地方调用initIconfont方法即可\\n布局中如何书写\\n```\\n\u002F\u002Ftemplate\\n    \u003Ctext class=\\\" iconfont\\\"\u003E\u003C\u002Ftext\u003E\\n\u002F\u002Fcss\\n.iconfont {\\n        font-family:iconfont;\\n    }\\n```\\n& # x e 6 6 0;即为图标Unicode\\n\",\"addTime\":1594964726,\"view_content\":0,\"type_id\":\"4\",\"__typename\":\"ArticleDto\"}}"}}},state:{error:null},_errors:{},serverRendered:true,config:{public:{},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:""}},__URQL_DATA__:{}}</script><script type="module" src="/_nuxt/entry-75bc457b.mjs" crossorigin></script><script type="module" src="/_nuxt/_id_-1f857193.mjs" crossorigin></script>
</body>

</html>